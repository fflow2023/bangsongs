<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BanG Dream! Archive</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" />

  <style>
@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;400;700&display=swap');
        
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .band-tag-PoppinParty { background-color: #ff3370; color: white; }
        .band-tag-Roselia { background-color: #3344aa; color: white; }
        .band-tag-Afterglow { background-color: #e93340; color: white; }
        .band-tag-PastelPalettes { background-color: #44ddcc; color: black; }
        .band-tag-HelloHappyWorld { background-color: #ffcc11; color: black; }
        .band-tag-RAISEASUILEN { background-color: #445566; color: white; border: 1px solid #ccff00; }
        .band-tag-Morfonica { background-color: #eeeeff; color: #112233; }
        .band-tag-MyGO { background-color: #335577; color: white; }
        .band-tag-AveMujica { background-color: #1a1a1a; color: #cc3333; border: 1px solid #cc3333; }
        .band-tag-GlitterGreen { background-color: #77dd77; color: white; }
        .band-tag-CHiSPA { background-color: #ffaa55; color: white; }
        .band-tag-CRYCHIC { background-color: #e0e0e0; color: #555; }
        .band-tag-sumimi { background-color: #ff88cc; color: white; }
        
        .like-btn.active span {
            font-variation-settings: 'FILL' 1;
            color: #ef4444;
        }

        @keyframes pulse-pink {
            0% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(236, 72, 153, 0); }
            100% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0); }
        }
        .play-btn:hover { animation: pulse-pink 1.5s infinite; }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Hero -->
  <div class="relative w-full h-64 md:h-80 overflow-hidden group">
    <img
      id="heroImage"
      alt="BanG Dream! Hero Background"
      class="absolute inset-0 w-full h-full object-cover opacity-20"
    />

    <!-- GitHub (floating) -->
    <a href="https://github.com/fflow2023/bangsongs"
       target="_blank"
       rel="noreferrer"
       title="æ‰“å¼€ GitHub ä»“åº“"
       class="absolute top-4 right-4 z-30 flex items-center justify-center w-12 h-12 rounded-full
              bg-slate-900/70 border border-slate-600 backdrop-blur
              hover:border-slate-400 hover:bg-slate-800/70 transition shadow-lg">
      <svg viewBox="0 0 24 24" aria-hidden="true" class="w-6 h-6 fill-slate-200">
        <path d="M12 .5C5.73.5.5 5.74.5 12.02c0 5.1 3.29 9.42 7.86 10.95.58.11.79-.25.79-.56v-2.02c-3.2.7-3.88-1.55-3.88-1.55-.53-1.35-1.29-1.71-1.29-1.71-1.06-.72.08-.7.08-.7 1.17.08 1.78 1.2 1.78 1.2 1.04 1.78 2.73 1.27 3.4.97.11-.76.41-1.27.74-1.56-2.56-.29-5.26-1.28-5.26-5.7 0-1.26.45-2.29 1.19-3.1-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.18a11.1 11.1 0 0 1 5.8 0c2.2-1.49 3.18-1.18 3.18-1.18.63 1.59.23 2.76.11 3.05.74.81 1.19 1.84 1.19 3.1 0 4.43-2.7 5.4-5.28 5.69.42.36.79 1.07.79 2.16v3.2c0 .31.21.68.8.56A11.53 11.53 0 0 0 23.5 12C23.5 5.74 18.27.5 12 .5z"/>
      </svg>
    </a>

    <div class="absolute inset-0 flex flex-col items-center justify-center px-4 text-center z-10 pointer-events-none">
      <h1 class="text-4xl md:text-6xl font-bold mb-2 tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 drop-shadow-lg">
        BanG Dream! åŠ¨ç”»ç³»åˆ—æ­Œæ›²æ•´ç†
      </h1>
      <p class="text-slate-300 text-lg md:text-xl max-w-2xl">
          å¿«é€Ÿæ£€ç´¢ Â· ä¸€é”®åˆ†äº«
      </p>
    </div>
  </div>

  <!-- Main -->
  <div class="flex-grow container mx-auto px-4 py-8 relative z-20 -mt-10">
    <!-- Controls -->
    <div class="glass-panel rounded-2xl p-6 mb-8 shadow-xl">
      <!-- Search & Share -->
      <div class="flex flex-col md:flex-row gap-4 mb-6 justify-between items-center">
        <div class="relative w-full md:w-1/2">
          <span class="material-symbols-outlined absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400">search</span>
          <input id="searchInput" type="text" placeholder="æœç´¢æ­Œåã€ç¿»è¯‘ã€æˆ–ä¹é˜Ÿ..."
                 class="w-full bg-slate-800 border border-slate-600 rounded-full py-3 pl-10 pr-4 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-pink-500 transition" />
        </div>

        <div class="flex gap-3 w-full md:w-auto">
          <button id="favFilterBtn" onclick="app.toggleFavoritesOnly()"
                  class="flex-1 md:flex-none flex items-center justify-center gap-2 bg-slate-700 hover:bg-slate-600 text-white px-5 py-3 rounded-full transition border border-slate-500">
            <span class="material-symbols-outlined text-red-400">favorite</span>
            <span id="favBtnText">åªçœ‹æ”¶è—</span>
          </button>

          <button onclick="app.shareFavorites()"
                  class="flex-1 md:flex-none flex items-center justify-center gap-2 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white px-6 py-3 rounded-full shadow-lg transition transform hover:scale-105">
            <span class="material-symbols-outlined">share</span>
            <span>åˆ†äº«å–œçˆ±</span>
          </button>
        </div>
      </div>

      <!-- Filters -->
      <div class="flex flex-col gap-4">
        <div class="overflow-x-auto pb-2">
          <div id="seasonFilters" class="flex gap-2 min-w-max"></div>
        </div>

        <div class="overflow-x-auto pb-2">
          <div id="bandFilters" class="flex gap-2 min-w-max"></div>
        </div>
      </div>
    </div>

    <!-- Grid -->
    <div id="songGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>

    <!-- Empty -->
    <div id="emptyState" class="hidden text-center py-20">
      <span class="material-symbols-outlined text-6xl text-slate-600 mb-4">music_off</span>
      <p class="text-xl text-slate-400">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ­Œæ›²</p>
      <button onclick="app.resetFilters()" class="mt-4 text-pink-400 hover:underline">é‡ç½®ç­›é€‰</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast"
       class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-slate-800 border border-slate-600 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 transition-opacity duration-300 opacity-0 pointer-events-none z-50">
    <span class="material-symbols-outlined text-green-400">check_circle</span>
    <span id="toastMsg">æ“ä½œæˆåŠŸ</span>
  </div>

  <script>
    // æ•°æ®æºï¼šä»…åŒ…å«â€œåŠ¨ç”»ä¸­å‡ºç°çš„å®Œæ•´æ¼”å‡º/æ’å…¥æ›²/OP/EDâ€ã€‚
const songsData = [
    // BanG Dream! S1ï¼ˆ2017ï¼‰
    { id: 101, title: "Donâ€™t be afraid!", trans: "åˆ«å®³æ€•ï¼", band: "Glitter*Green", season: "S1", ep: "ç¬¬1-2è¯", type: "Insert/ED" },
    { id: 102, title: "ã¨ãã‚ãã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ï¼", trans: "å¿ƒè·³ä½“éªŒ", band: "Poppin'Party", season: "S1", ep: "OP", type: "OP" },
    { id: 103, title: "ã‚­ãƒ©ã‚­ãƒ©ã ã¨ã‹å¤¢ã ã¨ã‹ ï½Sing Girlsï½", trans: "é—ªé—ªå‘å…‰ä¸æ¢¦æƒ³ï½Sing Girlsï½", band: "Poppin'Party", season: "S1", ep: "å¸¸è§„ED", type: "ED" },
    { id: 104, title: "ãã‚‰ãã‚‰æ˜Ÿ ï½åˆã‚ã¦ã®ã‚¹ãƒ†ãƒ¼ã‚¸Ver.ï½", trans: "å°æ˜Ÿæ˜Ÿï¼ˆåˆæ¬¡èˆå°ç‰ˆï¼‰", band: "Poppin'Party", season: "S1", ep: "ç¬¬3-4è¯", type: "Insert" },
    { id: 105, title: "ç§ã®å¿ƒã¯ãƒãƒ§ã‚³ã‚³ãƒ­ãƒ", trans: "æˆ‘çš„å¿ƒæ˜¯å·§å…‹åŠ›èºé¢åŒ…", band: "Poppin'Party", season: "S1", ep: "ç¬¬5è¯", type: "Insert" },
    { id: 106, title: "STAR BEAT! ï½ãƒ›ã‚·ãƒã‚³ãƒ‰ã‚¦ï½", trans: "æ˜Ÿä¹‹é¼“åŠ¨", band: "Poppin'Party", season: "S1", ep: "ç¬¬8è¯", type: "Insert" },
    { id: 107, title: "å‰ã¸ã‚¹ã‚¹ãƒ¡ï¼", trans: "å‘å‰è¿›ï¼", band: "Poppin'Party", season: "S1", ep: "ç¬¬9/11/12è¯", type: "Insert" },
    { id: 108, title: "Glee! Glee! Glee!", trans: "æ¬¢å‘¼å§ï¼", band: "Glitter*Green", season: "S1", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 109, title: "Be shine, shining!!", trans: "é—ªè€€å§ï¼Œå…‰èŠ’ï¼", band: "CHiSPA", season: "S1", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 110, title: "å¤¢ã¿ã‚‹Sunflower", trans: "æ€€æŠ±æ¢¦æƒ³çš„å‘æ—¥è‘µ", band: "Poppin'Party", season: "S1", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 111, title: "å…«æœˆã®if", trans: "å…«æœˆçš„ if", band: "Poppin'Party", season: "S1", ep: "OVA", type: "Insert" },
    { id: 112, title: "ç†±è‰²ã‚¹ã‚¿ãƒ¼ãƒã‚¤ãƒ³", trans: "çƒ­è‰² Starmine", band: "Roselia", season: "S1", ep: "OVA", type: "ED" },

    // BanG Dream! S2ï¼ˆ2019ï¼‰
    { id: 201, title: "ã‚­ã‚ºãƒŠãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯â™ª", trans: "ç¾ç»Šä¹‹éŸ³", band: "Poppin'Party", season: "S2", ep: "ç¬¬1/3-9/12è¯", type: "OP" },
    { id: 202, title: "BRAVE JEWEL", trans: "å‹‡æ°”å®çŸ³", band: "Roselia", season: "S2", ep: "ç¬¬2/10-11è¯", type: "OP" },
    { id: 203, title: "Jumpin'", trans: "è·ƒåŠ¨å§ï¼", band: "Poppin'Party", season: "S2", ep: "ç¬¬3-8/11-12è¯", type: "ED" },
    { id: 204, title: "Safe and Sound", trans: "å®‰ç¨³ä¸å®ˆæŠ¤", band: "Roselia", season: "S2", ep: "ç¬¬2/9-10è¯", type: "ED" },
    { id: 205, title: "ã‚­ã‚ºãƒŠãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯â™ª", trans: "ç¾ç»Šä¹‹éŸ³ï¼ˆç‰¹åˆ«ç‰ˆï¼‰", band: "Poppin'Party", season: "S2", ep: "ç¬¬13è¯", type: "ED" },

    { id: 206, title: "ã—ã‚…ã‚ã‚Šã‚“â˜†ã©ã‚Šï½ã¿ã‚“", trans: "æ³¡æ³¡â˜†Dreamin(ä¿®å“‡ä¿®å“‡)", band: "Pastel*Palettes", season: "S2", ep: "ç¬¬1/13è¯", type: "Insert" },
    { id: 207, title: "Scarlet Sky", trans: "çŒ©çº¢å¤©ç©º", band: "Afterglow", season: "S2", ep: "ç¬¬1è¯", type: "Insert" },
    { id: 208, title: "ãˆãŒãŠã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ã£ï¼", trans: "ç¬‘å®¹çš„ç®¡å¼¦ä¹", band: "Hello, Happy World!", season: "S2", ep: "ç¬¬1è¯", type: "Insert" },
    { id: 209, title: "LOUDER", trans: "æ›´å“äº®", band: "Roselia", season: "S2", ep: "ç¬¬1è¯", type: "Insert" },
    { id: 210, title: "Happy Happy Party!", trans: "å¿«ä¹å¿«ä¹æ´¾å¯¹ï¼", band: "Poppin'Party", season: "S2", ep: "ç¬¬1-2/6è¯", type: "Insert" },
    { id: 211, title: "BLACK SHOUT", trans: "é»‘è‰²å’†å“®", band: "Roselia", season: "S2", ep: "ç¬¬2/12è¯", type: "Insert" },
    { id: 212, title: "ã‚­ãƒ©ã‚­ãƒ©ã ã¨ã‹å¤¢ã ã¨ã‹ ï½Sing Girlsï½", trans: "é—ªé—ªå‘å…‰ä¸æ¢¦æƒ³", band: "Poppin'Party", season: "S2", ep: "ç¬¬3è¯", type: "Insert" },
    { id: 213, title: "ã‚´ãƒ¼ã‚«ï¼ã”ãƒ¼ã‹ã„ï¼ï¼Ÿãƒ•ã‚¡ãƒ³ãƒˆãƒ ã‚·ãƒ¼ãƒ•ï¼", trans: "è±ªååˆç—›å¿«ï¼ï¼Ÿæ€ªç›—å¹»å½±", band: "Hello, Happy World!", season: "S2", ep: "ç¬¬4è¯", type: "Insert" },
    { id: 214, title: "ä¸–ç•Œãƒãƒ“ãƒãƒ“ Treasure!", trans: "ä¸–ç•Œè‡ªåœ¨ Treasure", band: "Hello, Happy World!", season: "S2", ep: "ç¬¬4è¯", type: "Insert" },
    { id: 215, title: "ãƒ‘ã‚¹ãƒ‘ãƒ¬ãƒœãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãšâ˜†", trans: "Pasupare é©å‘½", band: "Pastel*Palettes", season: "S2", ep: "ç¬¬5è¯", type: "Insert" },
    { id: 216, title: "ã‚†ã‚‰ãƒ»ã‚†ã‚‰Ring-Dong-Dance", trans: "æ‘‡æ‘‡æ™ƒæ™ƒ Ring-Dong-Dance", band: "Pastel*Palettes", season: "S2", ep: "ç¬¬5/11è¯", type: "Insert" },
    { id: 217, title: "That Is How I Roll!", trans: "è¿™å°±æ˜¯æˆ‘çš„ä½œé£", band: "Afterglow", season: "S2", ep: "ç¬¬6è¯", type: "Insert" },
    { id: 218, title: "Y.O.L.O!!!!!", trans: "æ´»åœ¨å½“ä¸‹", band: "Afterglow", season: "S2", ep: "ç¬¬6è¯", type: "Insert" },
    { id: 219, title: "Donâ€™t be afraid!", trans: "åˆ«å®³æ€•ï¼", band: "Glitter*Green", season: "S2", ep: "ç¬¬7è¯", type: "Insert" },
    { id: 220, title: "æ³£ã‹ãªã„æ³£ã‹ãªã„", trans: "ä¸è¦å“­ä¸è¦å“­", band: "èŠ±å›­å¤šæƒ  & LAYER", season: "S2", ep: "ç¬¬7/10è¯", type: "Insert" },
    { id: 221, title: "ã²ã¨ã‚Šã˜ã‚ƒãªã„ã‚“ã ã‹ã‚‰", trans: "å› ä¸ºä¸æ˜¯ä¸€ä¸ªäºº", band: "Pastel*Palettes", season: "S2", ep: "ç¬¬8-9è¯", type: "Insert" },
    { id: 222, title: "Determination Symphony", trans: "å†³æ„äº¤å“æ›²", band: "Roselia", season: "S2", ep: "ç¬¬9è¯", type: "Insert" },
    { id: 223, title: "UNSTOPPABLE", trans: "æ— æ³•é˜»æŒ¡", band: "RAISE A SUILEN", season: "S2", ep: "ç¬¬10è¯", type: "Insert" },
    { id: 224, title: "Rãƒ»Iãƒ»Oãƒ»T", trans: "æš´åŠ¨", band: "RAISE A SUILEN", season: "S2", ep: "ç¬¬10è¯", type: "Insert" },
    { id: 225, title: "ãã‚‰ãã‚‰æ˜Ÿ", trans: "å°æ˜Ÿæ˜Ÿ", band: "Poppin'Party", season: "S2", ep: "ç¬¬11è¯", type: "Insert" },
    { id: 226, title: "STAR BEAT! ï½ãƒ›ã‚·ãƒã‚³ãƒ‰ã‚¦ï½", trans: "æ˜Ÿä¹‹é¼“åŠ¨", band: "Poppin'Party", season: "S2", ep: "ç¬¬11è¯", type: "Insert" },
    { id: 227, title: "Returns", trans: "å›å½’", band: "èŠ±å›­å¤šæƒ ", season: "S2", ep: "ç¬¬11è¯", type: "Insert" },
    { id: 228, title: "Returns", trans: "å›å½’", band: "Poppin'Party", season: "S2", ep: "ç¬¬12-13è¯", type: "Insert" },
    { id: 229, title: "Dreamers Go!", trans: "æ¢¦æƒ³å‡ºå‘", band: "æˆ·å±±é¦™æ¾„", season: "S2", ep: "ç¬¬12è¯", type: "Insert" },
    { id: 230, title: "Dreamers Go!", trans: "æ¢¦æƒ³å‡ºå‘", band: "Poppin'Party", season: "S2", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 231, title: "ãˆãŒãŠãƒ»ã‚·ãƒ³ã‚°ãƒ»ã‚ãƒ»ã‚½ãƒ³ã‚°", trans: "ç¬‘å®¹ Sing a Song", band: "Hello, Happy World!", season: "S2", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 232, title: "ãã‚…ï½ã¾ã„ï¼Šflower", trans: "QèŒï¼ŠFlower", band: "Pastel*Palettes", season: "S2", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 233, title: "ON YOUR MARK", trans: "å„å°±å„ä½", band: "Afterglow", season: "S2", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 234, title: "FIRE BIRD", trans: "ç«é¸Ÿ", band: "Roselia", season: "S2", ep: "ç¬¬13è¯", type: "Insert" },

    // BanG Dream! S3ï¼ˆ2020ï¼‰
    { id: 301, title: "ã‚¤ãƒ‹ã‚·ãƒ£ãƒ«", trans: "èµ·å§‹", band: "Poppin'Party", season: "S3", ep: "OP", type: "OP" },
    { id: 302, title: "å¤¢ã‚’æ’ƒã¡æŠœãç¬é–“ã«ï¼", trans: "å‡»ç©¿æ¢¦æƒ³çš„ç¬é—´", band: "Poppin'Party", season: "S3", ep: "ç¬¬1-6/8-12è¯", type: "ED" },
    { id: 303, title: "FIRE BIRD", trans: "ç«é¸Ÿ", band: "Roselia", season: "S3", ep: "ç¬¬7è¯", type: "ED" },

    { id: 304, title: "Determination Symphony", trans: "å†³æ„äº¤å“æ›²", band: "Roselia", season: "S3", ep: "ç¬¬1è¯", type: "Insert" },
    { id: 305, title: "Rãƒ»Iãƒ»Oãƒ»T", trans: "æš´åŠ¨", band: "RAISE A SUILEN", season: "S3", ep: "ç¬¬1-3/10è¯", type: "Insert" },
    { id: 306, title: "FIRE BIRD", trans: "ç«é¸Ÿ", band: "Roselia", season: "S3", ep: "ç¬¬3è¯", type: "Insert" },
    { id: 307, title: "StepÃ—Step!", trans: "ä¸€æ­¥ä¸€æ­¥", band: "Poppin'Party", season: "S3", ep: "ç¬¬3-4è¯", type: "Insert" },
    { id: 308, title: "EXPOSE 'Burn out!!!'", trans: "ç‡ƒå°½æ›å…‰", band: "RAISE A SUILEN", season: "S3", ep: "ç¬¬4-7/10è¯", type: "Insert" },
    { id: 309, title: "ã‚‚ã†ã„ã¡ã© ãƒ«ãƒŸãƒŠã‚¹", trans: "å†ä¸€æ¬¡ Luminous", band: "Pastel*Palettes", season: "S3", ep: "ç¬¬5è¯", type: "Insert" },
    { id: 310, title: "Poppin' Shuffle", trans: "Poppin æ´—ç‰Œ", band: "Poppin'Party", season: "S3", ep: "ç¬¬5/9/13è¯", type: "Insert" },
    { id: 311, title: "LOUDER", trans: "æ›´å“äº®", band: "Roselia", season: "S3", ep: "ç¬¬6-7è¯", type: "Insert" },
    { id: 312, title: "UNSTOPPABLE", trans: "æ— æ³•é˜»æŒ¡", band: "RAISE A SUILEN", season: "S3", ep: "ç¬¬6è¯", type: "Insert" },
    { id: 313, title: "ã—ã‚…ã‚ã‚Šã‚“â˜†ã©ã‚Šï½ã¿ã‚“", trans: "æ³¡æ³¡â˜†Dreamin'", band: "Pastel*Palettes", season: "S3", ep: "ç¬¬8è¯", type: "Insert" },
    { id: 314, title: "ãˆãŒãŠãƒ»ã‚·ãƒ³ã‚°ãƒ»ã‚ãƒ»ã‚½ãƒ³ã‚°", trans: "ç¬‘å®¹ Sing a Song", band: "Hello, Happy World!", season: "S3", ep: "ç¬¬9è¯", type: "Insert" },
    { id: 315, title: "Donâ€™t be afraid!", trans: "åˆ«å®³æ€•ï¼", band: "Glitter*Green", season: "S3", ep: "ç¬¬9è¯", type: "Insert" },
    { id: 316, title: "Dreamers Go!", trans: "æ¢¦æƒ³å‡ºå‘", band: "Poppin'Party", season: "S3", ep: "ç¬¬9è¯", type: "Insert" },
    { id: 317, title: "Beautiful Birthday", trans: "ç¾å¥½çš„ç”Ÿæ—¥", band: "RAISE A SUILEN", season: "S3", ep: "ç¬¬11/13è¯", type: "Insert" },
    { id: 318, title: "ãƒŸãƒ©ã‚¤ãƒˆãƒ¬ã‚¤ãƒ³", trans: "æœªæ¥åˆ—è½¦", band: "Poppin'Party", season: "S3", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 319, title: "Avant-garde HISTORY", trans: "å‰å«å†å²", band: "Roselia", season: "S3", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 320, title: "å¤¢ã‚’æ’ƒã¡æŠœãç¬é–“ã«ï¼", trans: "å‡»ç©¿æ¢¦æƒ³çš„ç¬é—´ï¼ˆåˆä½œç‰ˆï¼‰", band: "Poppin'Party Ã— Roselia Ã— RAISE A SUILEN", season: "S3", ep: "ç¬¬13è¯", type: "Insert" },

    // BanG Dream! Itâ€™s MyGO!!!!!ï¼ˆ2023ï¼‰
    { id: 401, title: "å£±é›«ç©º", trans: "å£±é›«ç©º", band: "MyGO!!!!!", season: "MyGO!!!!!", ep: "OP", type: "OP" },
    { id: 402, title: "æ ", trans: "æ ", band: "MyGO!!!!!", season: "MyGO!!!!!", ep: "ED", type: "ED" },

    { id: 403, title: "Here, the world!", trans: "Here, the world!", band: "sumimi", season: "MyGO!!!!!", ep: "ç¬¬1/4/5/6/7è¯", type: "Insert" },
    { id: 404, title: "ç‡¦ã€…æ­Œ", trans: "ç‡¦ã€…æ­Œ", band: "Afterglow", season: "MyGO!!!!!", ep: "ç¬¬1/12è¯", type: "Insert" },
    { id: 405, title: "Sprechchor", trans: "Sprechchor", band: "Roselia", season: "MyGO!!!!!", ep: "ç¬¬1è¯", type: "Insert" },
    { id: 406, title: "ã—ã‚…ã‚ã‚Šã‚“â˜†ã©ã‚Šï½ã¿ã‚“", trans: "æ³¡æ³¡â˜†Dreamin'", band: "Pastel*Palettes", season: "MyGO!!!!!", ep: "ç¬¬3è¯", type: "Insert" },
    { id: 407, title: "ã‚‚ã†ã„ã¡ã© ãƒ«ãƒŸãƒŠã‚¹", trans: "å†ä¸€æ¬¡ Luminous", band: "Pastel*Palettes", season: "MyGO!!!!!", ep: "ç¬¬3è¯", type: "Insert" },
    { id: 408, title: "äººé–“ã«ãªã‚ŠãŸã„ã†ãŸ", trans: "æƒ³æˆä¸ºäººç±»ä¹‹æ­Œ", band: "ä¸°å·ç¥¥å­ & CRYCHIC", season: "MyGO!!!!!", ep: "ç¬¬3è¯", type: "Insert" },
    { id: 409, title: "æ˜¥æ—¥å½±", trans: "æ˜¥æ—¥å½±", band: "CRYCHIC", season: "MyGO!!!!!", ep: "ç¬¬3è¯", type: "Insert" },
    { id: 410, title: "ç¢§å¤©ä¼´èµ°", trans: "ç¢§å¤©ä¼´èµ°", band: "MyGO!!!!!", season: "MyGO!!!!!", ep: "ç¬¬7è¯", type: "Insert" },
    { id: 411, title: "æ˜¥æ—¥å½±", trans: "æ˜¥æ—¥å½±", band: "MyGO!!!!!", season: "MyGO!!!!!", ep: "ç¬¬7è¯", type: "Insert" },
    { id: 412, title: "è©©è¶…çµ†", trans: "è©©è¶…çµ†", band: "MyGO!!!!!", season: "MyGO!!!!!", ep: "ç¬¬10è¯", type: "Insert" },
    { id: 413, title: "è¿·æ˜Ÿå«", trans: "è¿·æ˜Ÿå«", band: "MyGO!!!!!", season: "MyGO!!!!!", ep: "ç¬¬12è¯", type: "Insert" },
    { id: 414, title: "è¿·è·¯æ—¥ã€…ï¼ˆMelodyï¼‰", trans: "è¿·è·¯æ—¥ã€…ï¼ˆMelodyï¼‰", band: "MyGO!!!!!", season: "MyGO!!!!!", ep: "ç¬¬12è¯", type: "Insert" },
    { id: 415, title: "Ave Mujica", trans: "Ave Mujica", band: "Ave Mujica", season: "MyGO!!!!!", ep: "ç¬¬13è¯", type: "Insert" },

    // BanG Dream! Ave Mujicaï¼ˆ2024â€“2025ï¼‰
    { id: 501, title: "KiLLKiSS", trans: "è‡´å‘½ä¹‹å»", band: "Ave Mujica", season: "Ave Mujica", ep: "OP", type: "OP" },
    { id: 502, title: "Georgette Me, Georgette You", trans: "ä½ æˆ‘çš†ä¸ºä¹”å…¶çº±", band: "Ave Mujica", season: "Ave Mujica", ep: "ED", type: "ED" },

    { id: 503, title: "é‡‘è‰²ã¸ã®ãƒ—ãƒ¬ãƒªãƒ¥ãƒ¼ãƒ‰", trans: "é€šå¾€é‡‘è‰²çš„å‰å¥", band: "Morfonica", season: "Ave Mujica", ep: "ç¬¬1è¯", type: "Insert" },
    { id: 504, title: "Ave Mujica", trans: "Ave Mujica", band: "Ave Mujica", season: "Ave Mujica", ep: "ç¬¬2/5/9è¯", type: "Insert" },
    { id: 505, title: "Here, the world!", trans: "æ­¤åˆ»ï¼Œä¸–ç•Œ", band: "sumimi", season: "Ave Mujica", ep: "ç¬¬5/11è¯", type: "Insert" },
    { id: 506, title: "è¿·è·¯æ—¥ã€…ï¼ˆMelodyï¼‰", trans: "è¿·è·¯æ—¥ã€…ï¼ˆMelodyï¼‰", band: "MyGO!!!!!", season: "Ave Mujica", ep: "ç¬¬7è¯", type: "Insert" },
    { id: 507, title: "äººé–“ã«ãªã‚ŠãŸã„ã†ãŸâ…¡", trans: "æƒ³æˆä¸ºäººç±»ä¹‹æ­Œâ…¡", band: "CRYCHIC", season: "Ave Mujica", ep: "ç¬¬7è¯", type: "Insert" },
    { id: 508, title: "æ˜¥æ—¥å½±", trans: "æ˜¥æ—¥å½±", band: "CRYCHIC", season: "Ave Mujica", ep: "ç¬¬7è¯", type: "Insert" },
    { id: 509, title: "ã‚‚ã†ã„ã¡ã© ãƒ«ãƒŸãƒŠã‚¹", trans: "å†ä¸€æ¬¡ Luminous", band: "Pastel*Palettes", season: "Ave Mujica", ep: "ç¬¬8è¯", type: "Insert" },
    { id: 510, title: "Imprisoned XII", trans: "å›šç¦ XII", band: "Ave Mujica", season: "Ave Mujica", ep: "ç¬¬10è¯", type: "Insert" },
    { id: 511, title: "Crucifix X", trans: "åå­—æ¶ X", band: "Ave Mujica", season: "Ave Mujica", ep: "ç¬¬10è¯", type: "Insert" },
    { id: 512, title: "Greensleeves", trans: "ç»¿è¢–å­", band: "ä¸‰è§’åˆå", season: "Ave Mujica", ep: "ç¬¬11è¯", type: "Insert" },
    { id: 513, title: "è¿æ—¥ç®‹ç§‹", trans: "è¿æ—¥ç®‹ç§‹", band: "MyGO!!!!!", season: "Ave Mujica", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 514, title: "ç„šéŸ³æ‰“", trans: "ç„šéŸ³æ‰“", band: "MyGO!!!!!", season: "Ave Mujica", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 515, title: "å…«èŠ’æ˜Ÿãƒ€ãƒ³ã‚¹", trans: "å…«èŠ’æ˜Ÿä¹‹èˆ", band: "Ave Mujica", season: "Ave Mujica", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 516, title: "é¡”", trans: "é¡”", band: "Ave Mujica", season: "Ave Mujica", ep: "ç¬¬13è¯", type: "Insert" },
    { id: 517, title: "å¤©çƒã®MÃºsica", trans: "å¤©çƒçš„ MÃºsica", band: "Ave Mujica", season: "Ave Mujica", ep: "ç¬¬13è¯", type: "Insert" },

    // BanG Dream! FILM LIVE ç³»åˆ—
    // FILM LIVEï¼ˆ2019ï¼‰
    { id: 604, title: "ã¨ãã‚ãã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ï¼", trans: "å¿ƒè·³ä½“éªŒï¼ˆInstrumentalï¼‰", band: "Poppin'Party", season: "Film Live", ep: "FILM LIVE", type: "OP" },
    { id: 605, title: "äºŒé‡ã®è™¹", trans: "äºŒé‡ä¹‹è™¹ï¼ˆFullï¼‰", band: "Poppin'Party", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 606, title: "Happy Happy Party!", trans: "å¿«ä¹å¿«ä¹æ´¾å¯¹ï¼", band: "Poppin'Party", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 607, title: "Y.O.L.O!!!!!", trans: "æ´»åœ¨å½“ä¸‹", band: "Afterglow", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 608, title: "Scarlet Sky", trans: "çŒ©çº¢å¤©ç©º", band: "Afterglow", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 609, title: "ON YOUR MARK", trans: "å„å°±å„ä½ï¼ˆFullï¼‰", band: "Afterglow", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 610, title: "ã—ã‚…ã‚ã‚Šã‚“â˜†ã©ã‚Šï½ã¿ã‚“", trans: "æ³¡æ³¡â˜†Dreamin'", band: "Pastel*Palettes", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 611, title: "ã‚†ã‚‰ãƒ»ã‚†ã‚‰Ring-Dong-Dance", trans: "æ‘‡æ‘‡æ™ƒæ™ƒ Ring-Dong-Dance", band: "Pastel*Palettes", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 612, title: "ãã‚…ï½ã¾ã„ï¼Šflower", trans: "QèŒï¼ŠFlowerï¼ˆFullï¼‰", band: "Pastel*Palettes", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 613, title: "ãˆãŒãŠã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ã£ï¼", trans: "ç¬‘å®¹çš„ç®¡å¼¦ä¹", band: "Hello, Happy World!", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 614, title: "ä¸–ç•Œãƒãƒ“ãƒãƒ“ Treasure!", trans: "ä¸–ç•Œè‡ªåœ¨ Treasure", band: "Hello, Happy World!", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 615, title: "ãˆãŒãŠãƒ»ã‚·ãƒ³ã‚°ãƒ»ã‚ãƒ»ã‚½ãƒ³ã‚°", trans: "ç¬‘å®¹ Sing a Songï¼ˆFullï¼‰", band: "Hello, Happy World!", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 616, title: "LOUDER", trans: "æ›´å“äº®", band: "Roselia", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 617, title: "BLACK SHOUT", trans: "é»‘è‰²å’†å“®", band: "Roselia", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 618, title: "FIRE BIRD", trans: "ç«é¸Ÿï¼ˆFullï¼‰", band: "Roselia", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 619, title: "Returns", trans: "å›å½’", band: "Poppin'Party", season: "Film Live", ep: "FILM LIVE", type: "Insert" },
    { id: 620, title: "Dreamers Go!", trans: "æ¢¦æƒ³å‡ºå‘", band: "Poppin'Party", season: "Film Live", ep: "FILM LIVE", type: "Insert" },

    // Encoreï¼ˆFullï¼‰
    { id: 621, title: "BRAVE JEWEL", trans: "å‹‡æ°”å®çŸ³", band: "Roselia", season: "Film Live", ep: "FILM LIVE Encore", type: "Insert" },
    { id: 622, title: "ã‚­ã‚ºãƒŠãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯â™ª", trans: "ç¾ç»Šä¹‹éŸ³", band: "Poppin'Party", season: "Film Live", ep: "FILM LIVE Encore", type: "Insert" },

    // End Creditsï¼ˆEDï¼‰
    { id: 623, title: "Jumpin'", trans: "è·ƒåŠ¨å§ï¼", band: "Poppin'Party", season: "Film Live", ep: "FILM LIVE ED", type: "ED" },

    //2nd Stageï¼ˆ2021ï¼‰æ–°å¢æ›²
    { id: 601, title: "çµ†è‰²ã®ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«", trans: "ç¾ç»Šè‰²çš„åˆå¥", band: "Poppin'Party Ã— Pastel*Palettes Ã— Morfonica", season: "Film Live", ep: "FILM LIVE 2nd Stage", type: "Insert" },
    { id: 602, title: "ç«¶å®´RedÃ—Violet", trans: "ç«æ¼” RedÃ—Violet", band: "Roselia Ã— Afterglow", season: "Film Live", ep: "FILM LIVE 2nd Stage", type: "Insert" },
    { id: 603, title: "RASHAâ˜†PEOPLE!!", trans: "RASHAâ˜†PEOPLE!!", band: "RAISE A SUILEN Ã— Hello, Happy World!", season: "Film Live", ep: "FILM LIVE 2nd Stage", type: "Insert" },

    // BanG Dream! Morfonicationï¼ˆ2022ï¼‰
    { id: 701, title: "flame of hope -instrumental-", trans: "flame of hopeï¼ˆä¼´å¥ï¼‰", band: "Morfonica", season: "Morfonication", ep: "å‰ç¯‡Â·ED", type: "ED" },
    { id: 702, title: "å¯„ã‚‹è¾ºã®Sunny, Sunny", trans: "èƒ½å¤Ÿä¾é çš„æ™´å¤©", band: "Morfonica", season: "Morfonication", ep: "åç¯‡", type: "Insert" },
];


    // å›¾ç‰‡
    const bandImages = {
      "Glitter*Green": "images/GlitterGreen.png",
      "CHiSPA": "images/CHiSPA.png",
      "Poppin'Party": "images/Popipa.png",
      "Roselia": "images/Roselia.png",
      "Afterglow": "images/Afterglow.png",
      "Pastel*Palettes": "images/Pasupare.png",
      "Hello, Happy World!": "images/Hhw.png",
      "RAISE A SUILEN": "images/RAS.png",
      "Morfonica": "images/Morfonica.png",
      "MyGO!!!!!": "images/MyGO.png",
      "Ave Mujica": "images/Ave_Mujica.png",
      "CRYCHIC": "images/CRYCHIC.png",
      "sumimi": "images/sumimi.png"
    };
    const heroImageUrl = "images/Background.svg";

    const bandStyles = {
      "Poppin'Party": "band-tag-PoppinParty",
      "Roselia": "band-tag-Roselia",
      "Afterglow": "band-tag-Afterglow",
      "Pastel*Palettes": "band-tag-PastelPalettes",
      "Hello, Happy World!": "band-tag-HelloHappyWorld",
      "RAISE A SUILEN": "band-tag-RAISEASUILEN",
      "Morfonica": "band-tag-Morfonica",
      "MyGO!!!!!": "band-tag-MyGO",
      "Ave Mujica": "band-tag-AveMujica",
      "Glitter*Green": "band-tag-GlitterGreen",
      "CHiSPA": "band-tag-CHiSPA",
      "CRYCHIC": "band-tag-CRYCHIC",
      "sumimi": "band-tag-sumimi",
    };

    const seasons = ["å…¨éƒ¨", "S1", "S2", "S3", "Film Live", "Morfonication", "MyGO!!!!!", "Ave Mujica"];
    const bands = ["å…¨éƒ¨", "Poppin'Party", "Roselia", "RAISE A SUILEN", "MyGO!!!!!", "Ave Mujica", "Morfonica", "Afterglow", "Pastel*Palettes", "Hello, Happy World!", "å…¶ä»–"];

    const FAV_KEY = "bangdream_favs";
    const MAIN_BANDS = new Set(["Poppin'Party", "Roselia", "RAISE A SUILEN", "MyGO!!!!!", "Ave Mujica", "Morfonica", "Afterglow", "Pastel*Palettes", "Hello, Happy World!"]);

    const app = {
      state: {
        seasonFilter: "å…¨éƒ¨",
        bandFilter: "å…¨éƒ¨",
        searchQuery: "",
        favoritesOnly: false,
        favorites: new Set(),
      },

      init() {
        this.loadFavorites();
        this.renderFilters();
        this.renderSongs();

        document.getElementById("searchInput").addEventListener("input", (e) => {
          this.state.searchQuery = e.target.value.trim().toLowerCase();
          this.renderSongs();
        });

        const hero = document.getElementById("heroImage");
        if (hero) hero.src = heroImageUrl;

        this.updateFavoritesOnlyButton();
      },

      loadFavorites() {
        try {
          const saved = localStorage.getItem(FAV_KEY);
          if (saved) this.state.favorites = new Set(JSON.parse(saved));
        } catch {
          this.state.favorites = new Set();
        }
      },

      saveFavorites() {
        localStorage.setItem(FAV_KEY, JSON.stringify([...this.state.favorites]));
      },

      toggleFavorite(id) {
        this.state.favorites.has(id) ? this.state.favorites.delete(id) : this.state.favorites.add(id);
        this.saveFavorites();
        this.renderSongs();
      },

      setSeasonFilter(season) {
        this.state.seasonFilter = season;
        this.renderFilters();
        this.renderSongs();
      },

      setBandFilter(band) {
        this.state.bandFilter = band;
        this.renderFilters();
        this.renderSongs();
      },

      toggleFavoritesOnly() {
        this.state.favoritesOnly = !this.state.favoritesOnly;
        this.updateFavoritesOnlyButton();
        this.renderSongs();
      },

      resetFilters() {
        this.state.seasonFilter = "å…¨éƒ¨";
        this.state.bandFilter = "å…¨éƒ¨";
        this.state.searchQuery = "";
        this.state.favoritesOnly = false;

        document.getElementById("searchInput").value = "";
        this.updateFavoritesOnlyButton();
        this.renderFilters();
        this.renderSongs();
      },

      updateFavoritesOnlyButton() {
        const btn = document.getElementById("favFilterBtn");
        const text = document.getElementById("favBtnText");

        if (this.state.favoritesOnly) {
          btn.classList.add("bg-pink-600", "border-pink-400");
          btn.classList.remove("bg-slate-700", "border-slate-500");
          text.textContent = "æ˜¾ç¤ºå…¨éƒ¨";
        } else {
          btn.classList.remove("bg-pink-600", "border-pink-400");
          btn.classList.add("bg-slate-700", "border-slate-500");
          text.textContent = "åªçœ‹æ”¶è—";
        }
      },

      renderFilters() {
        const sContainer = document.getElementById("seasonFilters");
        sContainer.innerHTML = seasons
          .map((s) => `
            <button onclick="app.setSeasonFilter('${s}')"
              class="px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition
                ${this.state.seasonFilter === s ? "bg-white text-slate-900 shadow-lg scale-105" : "bg-slate-700 text-slate-300 hover:bg-slate-600"}">
              ${s}
            </button>`)
          .join("");

        const bContainer = document.getElementById("bandFilters");
        bContainer.innerHTML = bands
          .map((b) => `
            <button
              data-band="${b}"
              class="band-filter-btn px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition border
                ${this.state.bandFilter === b
                  ? "border-pink-500 bg-slate-800 text-pink-400 shadow-[0_0_10px_rgba(236,72,153,0.3)]"
                  : "border-slate-600 bg-transparent text-slate-400 hover:border-slate-400"}">
              ${b}
            </button>`)
          .join("");

        document.querySelectorAll(".band-filter-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const band = btn.dataset.band;
            app.setBandFilter(band);
          });
        });
      },

      renderSongs() {
        const grid = document.getElementById("songGrid");
        const empty = document.getElementById("emptyState");

        const q = this.state.searchQuery;

        const filtered = songsData.filter((song) => {
          const matchSearch =
            !q ||
            song.title.toLowerCase().includes(q) ||
            (song.trans || "").toLowerCase().includes(q) ||
            song.band.toLowerCase().includes(q);

          const matchSeason = this.state.seasonFilter === "å…¨éƒ¨" || song.season === this.state.seasonFilter;

          let matchBand = false;
          if (this.state.bandFilter === "å…¨éƒ¨") matchBand = true;
          else if (this.state.bandFilter === "å…¶ä»–") matchBand = !MAIN_BANDS.has(song.band);
          else matchBand = song.band === this.state.bandFilter;

          const matchFav = !this.state.favoritesOnly || this.state.favorites.has(song.id);

          return matchSearch && matchSeason && matchBand && matchFav;
        });

        if (!filtered.length) {
          grid.innerHTML = "";
          empty.classList.remove("hidden");
          return;
        }
        empty.classList.add("hidden");

        grid.innerHTML = filtered
          .map((song) => {
            const isFav = this.state.favorites.has(song.id);
            const bandClass = bandStyles[song.band] || "bg-slate-600 text-white";
            const imageSrc = bandImages[song.band] || "images/default.png";
            const bilibiliUrl = `https://search.bilibili.com/all?keyword=${encodeURIComponent(`BanG Dream live ${song.title}`)}`;

            return `
              <div class="bg-slate-800 rounded-xl overflow-hidden shadow-lg card-hover group relative flex flex-col h-full border border-slate-700">
                <div class="relative h-48 overflow-hidden bg-slate-900">
                  <img src="${imageSrc}" alt="${song.band}"
                       class="w-full h-full object-cover transition duration-700 group-hover:scale-110 opacity-90 group-hover:opacity-100" loading="lazy" />
                  <div class="absolute inset-0 bg-gradient-to-t from-slate-900 to-transparent opacity-80"></div>
                  <div class="absolute bottom-2 left-3 right-3 flex justify-between items-end">
                    <span class="text-xs font-bold uppercase tracking-wider text-slate-400 bg-slate-900/80 px-2 py-1 rounded backdrop-blur-sm">
                      ${song.season} â€¢ ${song.ep}
                    </span>
                  </div>
                </div>

                <div class="p-5 flex-grow flex flex-col relative">
                  <button onclick="app.toggleFavorite(${song.id})"
                    class="like-btn absolute -top-6 right-4 w-12 h-12 rounded-full bg-slate-700 border border-slate-500 shadow-lg flex items-center justify-center transition hover:bg-slate-600 hover:scale-110 z-10 ${isFav ? "active border-red-500" : ""}">
                    <span class="material-symbols-outlined text-2xl text-slate-300 transition-colors">favorite</span>
                  </button>

                  <div class="mb-2">
                    <span class="text-xs font-bold px-2 py-1 rounded ${bandClass} inline-block shadow-sm">${song.band}</span>
                  </div>

                  <h3 class="text-xl font-bold text-white mb-1 leading-tight group-hover:text-pink-400 transition">${song.title}</h3>
                  ${song.trans ? `<p class="text-sm text-slate-400 mb-4">${song.trans}</p>` : '<div class="mb-4"></div>'}

                  <div class="mt-auto pt-4 border-t border-slate-700 flex justify-between items-center">
                    <span class="text-xs text-slate-500 bg-slate-800 px-2 py-1 rounded border border-slate-700">${song.type}</span>
                  </div>

                  <a href="${bilibiliUrl}" target="_blank" rel="noreferrer"
                     class="play-btn absolute bottom-3 right-3 w-10 h-10 rounded-full bg-pink-600 hover:bg-pink-500 text-white flex items-center justify-center shadow-lg transition transform hover:-translate-y-1 hover:scale-110 z-20 group-hover:bg-pink-500">
                    <span class="material-symbols-outlined text-2xl">arrow_forward</span>
                  </a>
                </div>
              </div>
            `;
          })
          .join("");
      },

      shareFavorites() {
        if (!this.state.favorites.size) {
          this.showToast("è¯·å…ˆæ”¶è—ä¸€äº›æ­Œæ›²ï¼", "error");
          return;
        }

        const favSongs = songsData.filter((s) => this.state.favorites.has(s.id));
        let text = "ğŸµ æˆ‘çš„ BanG Dream! æ­Œå•åˆ†äº« ğŸµ";
        favSongs.forEach((s, i) => {
          text += `\n${i + 1}. ${s.title} (${s.band})`;
        });
        text += "\næ¥è‡ª BanG Dream! Archive ç½‘é¡µ( https://fflow2023.github.io/bangsongs )";

        navigator.clipboard
          .writeText(text)
          .then(() => this.showToast("æ­Œå•å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼"))
          .catch(() => this.showToast("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•", "error"));
      },

      showToast(msg, type = "success") {
        const toast = document.getElementById("toast");
        const msgEl = document.getElementById("toastMsg");
        const iconEl = toast.querySelector("span");

        msgEl.textContent = msg;
        if (type === "error") {
          iconEl.textContent = "error";
          iconEl.classList.replace("text-green-400", "text-red-400");
        } else {
          iconEl.textContent = "check_circle";
          iconEl.classList.replace("text-red-400", "text-green-400");
        }

        toast.classList.remove("opacity-0", "pointer-events-none");
        window.clearTimeout(this._toastTimer);
        this._toastTimer = window.setTimeout(() => {
          toast.classList.add("opacity-0", "pointer-events-none");
        }, 3000);
      },
    };

    window.app = app;
    document.addEventListener("DOMContentLoaded", () => app.init());
  </script>
</body>
</html>
